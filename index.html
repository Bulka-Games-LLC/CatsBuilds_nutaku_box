<?xml version="1.0" encoding="UTF-8"?>
<Module>
    <ModulePrefs title="Kinky Cats" author="Bulka Games LLC" thumbnail="" screenshot="" height="856" width="1900">
        <Require feature="opensocial-0.8"/>
        <Require feature="opensocial-payment"/>
        <Require feature="nutaku"/>
        <Require feature="dynamic-height" />
        <Link rel="payment.handler" href="https://nutaku-1.webhooks.balancy.dev/v1/nutaku/confirmation"/>
    </ModulePrefs>
   <Content preferred_width="1920" type="html" view="canvas">
    <![CDATA[
        <script src="https://kinky-cats-stagebox.b-cdn.net/Build/Builds_ntk_box.framework.js"></script>
        <script src="https://kinky-cats-stagebox.b-cdn.net/Build/Builds_ntk_box.loader.js"></script>
        <script type="text/javascript">
		
			  let gameInstance;
			  const balancyData = {};
			  const buildUrl = 'https://kinky-cats-stagebox.b-cdn.net/Build';
			  const config   = {
                dataUrl:            buildUrl + '/Builds_ntk_box.data',
                frameworkUrl:       buildUrl + '/Builds_ntk_box.framework.js',
                codeUrl:            buildUrl + '/Builds_ntk_box.wasm',
                streamingAssetsUrl: "https://kinky-cats-stagebox.b-cdn.net/StreamingAssets",
                companyName:        'Bulka Games LLC',
                productName:        'Kinky Cats',
                productVersion:     "1.9.0",
            };
			
            var canvas;
			var bar;
			var barParent;
             
            function init() {
			    console.warn('init');
                canvas = document.querySelector("#unity-canvas"); //or getElementById('unity-canvas')
				bar = document.querySelector("#progress-bar");
				barParent = document.querySelector("#progress-div");
				
				canvas.style.width  = '100%';
                canvas.style.height = '100%';
				gadgets.window.adjustHeight();
				
				
                createUnityInstance(canvas, config, (progress) => {
				bar.style.width = 100 * progress + "%";
                  //console.log("*");
                  }).then((unityInstance) => {
				    gameInstance = unityInstance;
					
					var bb = document.querySelector("#unity-body");
					bb.style.backgroundImage = '';
					//barParent.parentNode.removeChild(barParent);
                    console.log("WAS LOADED");
                  }).catch((message) => {
                    alert(message);
                  });
            }
 
            gadgets.util.registerOnLoadHandler(init);
        </script>
         
        <body id="unity-body" style="height: 856px ; margin: 0; background-image: url('https://kinky-cats-stagebox.b-cdn.net/TemplateData/bulka-logo.jpg'); background-size: 100%; background-position:center; background-repeat: no-repeat;">			
				<div id="unity-container"  class="unity-desktop" style="display: contents">
					<canvas id="unity-canvas"></canvas>
					<div id="progress-div" style="display: contents; vertical-align: middle; width: 100%; height: 856px;">
						<img id="progress-bar"
						src="https://kinky-cats-stagebox.b-cdn.net/TemplateData/progress-bar-full.png"
						width=0px
						height = 6px		
						align = left
						bottom = 0px
						vertical-align: bottom
						/>
					</div>
				</div>
				
        </body>
    ]]>
    </Content>
</Module>
